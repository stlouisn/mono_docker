FROM stlouisn/ubuntu:rolling-arm

RUN \

    export DEBIAN_FRONTEND=noninteractive && \

    # Update apt-cache
    apt-get update && \

#    # Install temporary-tools
#    apt-get install -y --no-install-recommends \
#        gnupg \
#        dirmngr && \
#
#    # Add mono repository
#    apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 3FA7E0328081BFF6A14DA29AA6A19B38D3D831EF && \
#    echo "deb https://download.mono-project.com/repo/ubuntu stable main" > /etc/apt/sources.list.d/mono-official-stable.list && \
#        
#    # Update apt-cache
#    apt-get update && \
#
#    # Install Mono
#    apt-get install -y --no-install-recommends \
#        mono-runtime \
#        libmono-cil-dev && \
#
#    # Remove temporary-tools
#    apt-get purge -y \
#        gnupg \
#        dirmngr && \

    # Install temporary-tools
    apt-get install -y --no-install-recommends \
        autoconf \
        automake \
        build-essential \
        cmake \
        gettext \
        git \
        pkg-config \
        python \
        libgtk2.0-dev \
        libperl-dev \
        libtool \
        libtool-bin && \

cd /tmp && \
git clone git://github.com/mono/libgdiplus && \
cd libgdiplus && \
./autogen.sh --prefix=/usr && \
make && \
make install && \
cd /tmp && \
clone git://github.com/mono/mono.git && \
cd mono && \
./autogen.sh --prefix=/usr/local && \
apt-get install -y mono-gmcs && \
make && \
make install && \
cd /tmp && \

    # Remove temporary-tools
    apt-get purge -y \
        autoconf \
        automake \
        build-essential \
        cmake \
        gettext \
        git \
        pkg-config \
        python \
        libgtk2.0-dev \
        libperl-dev \
        libtool \
        libtool-bin && \

    # Clean apt-cache
    apt-get autoremove -y --purge && \
    apt-get autoclean -y && \

    # Cleanup temporary folders
    rm -rf \
        /root/.cache \
        /root/.wget-hsts \
        /tmp/* \
        /var/lib/apt/lists/*
